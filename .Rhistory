df_myp %>%
group_by(year) %>%
summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
geom_density(aes(year, price), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
group_by(year) %>%
summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
geom_density(aes(year, after_stat(price)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_rp %>%
group_by(date) %>%
mutate(year = year(date),
month = month(date)) %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_density()
df_rp %>%
group_by(date) %>%
mutate(year = year(date),
month = month(date)) %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(date, after_stat(count)), show.legend = FALSE) +
geom_density(year, after_stat(count)) +
```
df_rp %>%
group_by(date) %>%
mutate(year = year(date),
month = month(date)) %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(date, after_stat(count)), show.legend = FALSE) +
geom_density(year, after_stat(count))
df_myp %>%
group_by(year) %>%
summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
geom_density(aes(year, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
geom_density(aes(year, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
geom_density(aes(price, after_stat(sum)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
geom_density(aes(price, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(price, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_point(aes(fill = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(price, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
group_by(year) %>%
summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_point(aes(color = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(price, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
group_by(year) %>%
summarise(price = median(price)) %>%
ggplot(aes(year, price)) +
geom_point(aes(color = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(price, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_myp %>%
group_by(year) %>%
summarise(price = mean(price)) %>%
ggplot(aes(year, price)) +
geom_point(aes(color = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(price, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
df_rp
df_rp
raw_reviews.df
raw_reviews.df %>%
mutate(quarter = case_when(month(date) %in% c(1, 2, 3) ~ 'Q1',
month(date) %in% c(4, 5, 6) ~ 'Q2',
month(date) %in% c(7, 8, 9) ~ 'Q3',
month(date) %in% c(10, 11, 12) ~ 'Q4'
))
df
df_myp
filter(neighbourhood_cleansed
```
filter(neighbourhood_cleansed
```
df_myp %>%
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4'))
df_myp %>%
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4')
df_myp %>%
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4')
df_myp %>%
mutate(quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4'))
raw_reviews.df %>%
group_by(date) %>%
mutate(date = as_date(date, '%y-%m-%d'),
month = month(date),
year = year(date),
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4')) %>%
ggplot(aes(year)) +
geom_bar(aes(color = quarter), show.legend = FALSE) +
# geom_density(aes(date, after_stat(count)), show.legend = FALSE) +
theme_few() +
scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
```
raw_reviews.df %>%
group_by(date) %>%
mutate(date = as_date(date, '%y-%m-%d'),
month = month(date),
year = year(date),
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4')) %>%
ggplot(aes(year)) +
geom_bar(aes(color = quarter), show.legend = FALSE) +
# geom_density(aes(date, after_stat(count)), show.legend = FALSE) +
theme_few() +
scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
2016, 2017, 2018, 2019, 2020, 2021, 2022))
raw_reviews.df %>%
group_by(date) %>%
mutate(date = as_date(date, '%y-%m-%d'),
month = month(date),
year = year(date),
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4'))
df_rp
df_myp
raw_listings.df
reviews.df
raw_reviews.df
reviews.df = raw_reviews.df %>%
group_by(date) %>%
mutate(date = as_date(date, '%y-%m-%d'),
month = month(date),
year = year(date),
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4'))
reviews.df = raw_listings.df %>%
select(price, id) %>%
mutate(price = as.integer(gsub(',|\\$|%|N/A', '', price))) %>%
merge(., reviews.df, by.x = 'id',
by.y = 'listing_id')
reviews.df
raw_reviews.df$date
mdy(raw_reviews.df$date)
ymd(raw_reviews.df$date, '%y-%m-%d')
ymd(raw_reviews.df$date)
raw_reviews.df %>%
mutate(date = ymd(date))
raw_reviews.df %>%
mutate(date = ymd(date),
month = month(date),
year = year(date))
# making date as_date format
# also adding additional columns: month, year, quarter
reviews.df = raw_reviews.df %>%
group_by(date) %>%
mutate(date = ymd(date),
month = month(date),
year = year(date),
quarter = case_when(month %in% c(1, 2, 3) ~ 'Q1',
month %in% c(4, 5, 6) ~ 'Q2',
month %in% c(7, 8, 9) ~ 'Q3',
month %in% c(10, 11, 12) ~ 'Q4'))
# merging price with columns
reviews.df = raw_listings.df %>%
select(price, id) %>%
mutate(price = as.integer(gsub(',|\\$|%|N/A', '', price))) %>%
merge(., reviews.df, by.x = 'id',
by.y = 'listing_id') %>%
distinct()
reviews.df
listings.df %>%
# group_by(state) %>%
# mutate(price2 = mean(price)) %>%
# ungroup(state) %>%
ggplot(aes(price, reorder(state, price))) +
geom_boxplot(aes(fill = 'FC642D'), show.legend = FALSE) +
theme_few() +
labs(title = 'Average Cost by State',
x = 'Price per night (USD)',
y = 'State',
color = FALSE)
# removing columns we don't need
listings.df = raw_listings.df %>%
select(-c(2:3, 9, 15:16, 23, 27, 35:38, 41:45, 47, 49:51, 61:64, 68:77))
#removing na from selected columns
listings.df = listings.df %>%
drop_na(c(description, host_since, bedrooms, beds, bathrooms_text))
#making df readable and easy to analyze
listings.df = listings.df %>%
mutate(across(c(price, host_acceptance_rate, host_response_rate,
host_response_time), ~ gsub(',|\\$|%|N/A', '', .)),
bathrooms = ifelse(grepl('half-bath', bathrooms_text),
0.5, gsub('[^0-9.]', '',bathrooms_text)),
across(c(review_scores_rating, review_scores_accuracy,
review_scores_cleanliness, review_scores_checkin,
review_scores_communication, review_scores_location,
review_scores_value, reviews_per_month, accommodates,
bedrooms, beds, minimum_nights, maximum_nights,
minimum_nights_avg_ntm, maximum_nights_avg_ntm, price,
number_of_reviews, host_total_listings_count, bathrooms,
price, host_acceptance_rate, host_response_rate,
availability_365), as.numeric),
across(c(description, host_about), ~ str_count(., '\\s+') + 1),
across(c(host_since, last_review), ~ as.Date(., '%m/%d/%y')),
title_len = str_length(name),
num_hosts = str_count(host_name, 'and|And|\\&') + 1,
amenities_count = str_count(amenities, '"') / 2,
num_verification = str_count(host_verifications, "'") / 2,
bathrooms_text = ifelse(grepl('hared', bathrooms_text),
'shared', 'private'),
across(c(host_response_time, bathrooms_text, property_type,
room_type), factor),
across(c(instant_bookable, host_has_profile_pic,
host_identity_verified, host_is_superhost), as.logical))
# removing additional null values
listings.df = listings.df %>%
filter(!price == 0)
# and outliers
var_ = df$price
quartiles = quantile(var_, probs=c(0.25, 0.75))
iqr = IQR(var_)
lower = quartiles[1] - 1.5 * iqr
upper = quartiles[2] + 1.5 * iqr
listings.df = subset(df, var_ > lower & var_ < upper)
listings.df %>%
# group_by(state) %>%
# mutate(price2 = mean(price)) %>%
# ungroup(state) %>%
ggplot(aes(price, reorder(state, price))) +
geom_boxplot(aes(fill = 'FC642D'), show.legend = FALSE) +
theme_few() +
labs(title = 'Average Cost by State',
x = 'Price per night (USD)',
y = 'State',
color = FALSE)
ggsave('AirBNB Cost by State - Boxplot.png', width = 10, height = 6)
listings.df %>%
group_by(state) %>%
summarise(price = mean(price)) %>%
ggplot(aes(price, reorder(state, price))) +
geom_col(aes(fill = 'FC642D'), show.legend = FALSE) +
theme_few() +
labs(title = 'Average Cost by State',
x = 'Price per night (USD)',
y = 'State')
ggsave('AirBNB Cost by State - Barplot.png', width = 10, height = 6)
listings.df %>%
filter(number_of_reviews < 2000) %>%
ggplot(aes(price, number_of_reviews)) +
geom_col(aes(color = 'FC642D'), show.legend = FALSE) +
facet_wrap(. ~ room_type, scales = 'free') +
theme_few() +
labs(title = 'Room Cost vs. Reviews',
color = 'Room Type',
x = 'Price per night (USD)',
y = 'Number of Reviews')
ggsave('Room Cost by Reviews.png', width = 10, height = 6)
listings.df
reviews.df
listings.df
reviews.df
listings.df %>%
# group_by(state) %>%
# mutate(price2 = mean(price)) %>%
# ungroup(state) %>%
ggplot(aes(price, reorder(state, price))) +
geom_boxplot(aes(fill = 'FC642D'), show.legend = FALSE) +
theme_few() +
labs(title = 'Average Cost by State',
x = 'Price per night (USD)',
y = 'State',
color = FALSE)
ggsave('AirBNB Cost by State - Boxplot.png', width = 10, height = 6)
airbnb_red = 'FC642D'
airbnb_red
listings.df %>%
# group_by(state) %>%
# mutate(price2 = mean(price)) %>%
# ungroup(state) %>%
ggplot(aes(price, reorder(state, price))) +
geom_boxplot(aes(fill = airbnb_red), show.legend = FALSE) +
theme_few() +
labs(title = 'Average Cost by State',
x = 'Price per night (USD)',
y = 'State',
color = FALSE)
ggsave('AirBNB Cost by State - Boxplot.png', width = 10, height = 6)
listings.df %>%
group_by(state) %>%
summarise(price = mean(price)) %>%
ggplot(aes(price, reorder(state, price))) +
geom_col(aes(fill = airbnb_red), show.legend = FALSE) +
theme_few() +
labs(title = 'Average Cost by State',
x = 'Price per night (USD)',
y = 'State')
ggsave('AirBNB Cost by State - Barplot.png', width = 10, height = 6)
listings.df %>%
filter(number_of_reviews < 2000) %>%
ggplot(aes(price, number_of_reviews)) +
geom_col(aes(color = airbnb_red), show.legend = FALSE) +
facet_wrap(. ~ room_type, scales = 'free') +
theme_few() +
labs(title = 'Room Cost vs. Reviews',
color = 'Room Type',
x = 'Price per night (USD)',
y = 'Number of Reviews')
listings.df %>%
filter(!number_of_reviews > 2000) %>%
ggplot(aes(price, number_of_reviews)) +
geom_point(aes(color = airbnb_red), show.legend = FALSE) +
theme_few() +
labs(title = 'Distribution of Price and Reviews',
x = 'Price (USD)',
y = 'Number of Reviews') +
scale_x_continuous(breaks = c(0, 250, 500), labels = c('0', '$250', '$500')) +
scale_y_continuous(breaks = c(0, 500, 1e3, 1.5e3, 2e3),
labels = c('0', '0.5K', '1K', '1.5K', '2K'))
max = max(date)
reviews.df %>%
na.omit() %>%
summarise(min = min(date),
max = max(date))
reviews.df %>%
group_by(date) %>%
ggplot(aes(date)) +
geom_bar(aes(fill = airbnb_red), show.legend = FALSE) +
# geom_density(aes(date, after_stat(count)), show.legend = FALSE) +
theme_few() +
scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB usage throughout time',
x = 'Year',
y = 'Count (Reviews)',
color = FALSE)
ggsave('AirBNB Usage throughout time - HistDensityplot.png', width = 10, height = 6)
reviews.df %>%
ggplot(aes(year)) +
geom_bar(aes(fill = airbnb_red), show.legend = FALSE) +
# geom_density(aes(date, after_stat(count)), show.legend = FALSE) +
theme_few() +
scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB usage throughout time',
x = 'Year',
y = 'Count (Reviews)',
color = FALSE)
df_rp
listings.df %>%
na.omit(host_since) %>%
mutate(host_since = year(host_since)) %>%
# group_by(host_since) %>%
# summarise(count = n()) %>%
ggplot(aes(host_since, number_of_reviews)) +
geom_col(aes(fill = airbnb_red), show.legend = FALSE) +
facet_wrap(. ~ room_type, scales = 'free') +
theme_few() +
scale_x_continuous(breaks = c(2010, 2015, 2020)) +
# scale_x_continuous(breaks = c(2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
reviews.df %>%
group_by(year) %>%
summarise(price = mean(price)) %>%
ggplot(aes(year, price)) +
geom_point(aes(color = 'FC642D'), show.legend = FALSE) +
# geom_density(aes(price, after_stat(count)), show.legend = FALSE) +
theme_few() +
# facet_wrap(. ~ month, scales = 'free') +
# scale_x_continuous(breaks = c(2009, 2010, 2011, 2012, 2013, 2014, 2015,
#                               2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
labs(title = 'AirBNB Properties throughout time',
x = 'Year',
y = 'Count (Properties)')
reviews.df %>%
group_by(date) %>%
mutate(year = year(date),
month = month(date)) %>%
# group_by(year) %>%
# summarise(price = max(price)) %>%
ggplot(aes(year, price)) +
geom_col(aes(fill = airbnb_red), show.legend = FALSE) +
# geom_density(aes(date, after_stat(count)), show.legend = FALSE) +
geom_density(year, after_stat(count))
